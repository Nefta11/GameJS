<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Juego Basico</title>
    <link rel="icon" href="/images/icon.png" type="image/png">
    <style type="text/css">
        canvas {
            background-color: rgb(238, 130, 238);
        }

        body {
            margin: 0 auto;
            overflow: hidden;

        }
    </style>
</head>

<body>
    <canvas id="canvas" width="2000" height="1000">

    </canvas>
    <script type="text/javascript">
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');

        /* ctx.moveTo(0, 0);
         ctx.lineTo(200, 100);
         ctx.stroke();
         */

        let player = new Image();
        player.src = '/images/dog.png';

        let x = 0;
        let y = 0;
        let key, keyState = 0;

        player.onload = function () {
            ctx.drawImage(player, x, y, 150, 150);
        }

        document.onkeydown = function (e) {
            keyState = "keydown";
            key = e.key;
        }

        document.onkeyup = function (e) {
            keyState = "keyup";
        }

        let obstaculo = {
            x: 300,
            y: 0,
            width: 50,
            height: 200
        }

        setInterval(function () {
            if (keyState === "keyup") {
                return;
            }

            if (key === "w") {
                y -= 1;
            }

            if (key === "a") {
                x -= 1;
            }

            if (key === "s") {
                y += 1;
            }

            if (key === "d") {
                x += 1;
            }

            ctx.clearRect(0, 0, 2000, 2000);
            ctx.drawImage(player, x, y, 150, 150);

            ctx.fillStyle = "black";
            obstaculo.x -= 1;
            ctx.fillRect(obstaculo.x, obstaculo.y, obstaculo.width, obstaculo.height);
        }, 5);

    </script>

</body>

</html>